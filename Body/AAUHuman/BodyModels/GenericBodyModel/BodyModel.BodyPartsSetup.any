


// ----------------------------------------------------------------------------------------------------------------
// BodyPartSetup - generic handling
// ----------------------------------------------------------------------------------------------------------------


// Setup default BM_LEG_DATASET for the TLEM models

#if BM_LEG_MODEL == _LEG_MODEL_TLEM_
  #path BM_LEG_TLEM_PATH "../../LegTLEM"
  #ifndef BM_LEG_DATASET
  #define BM_LEG_DATASET "TLEM2.2"
  #endif
#endif



#ifdef BM_LEG_DATASET
  #ifndef BM_LEG_DATASET_PATH
    #path BM_LEG_DATASET_PATH "<BM_LEG_TLEM_PATH>/" + BM_LEG_DATASET
    #include "<BM_LEG_DATASET_PATH>/PreprocDefaults.any"
  #endif
#endif


//
// SCALING related logic
//
#ifdef BM_SCALING_FILE
   #if BM_SCALING != _SCALING_CUSTOM_
   AnyInt bm_scaling_notice1= notice(0, strformat("\n"+
      "------------------------------------------------------------------------------------------------------\n"+
      "    A custom scaling law is specified by `BM_SCALING_FILE`. "+
      "    This overrides the selection by the BM_SCALING parameter\n"+
      "    Set `#define BM_SCALING _SCALING_CUSTOM_` to dismiss this notice.'\n"+
      "-------------------------------------------------------------------------------------------------------"));
   #endif
   #undef BM_SCALING
   #define BM_SCALING _SCALING_CUSTOM_
#endif


//Base scaling laws according to the configuration file
#if (BM_SCALING == _SCALING_NONE_)
  #path BM_SCALING_FILE  "<ANYBODY_PATH_BODY>\Scaling\ScalingNone.any"
#endif

#if (BM_SCALING == _SCALING_STANDARD_) | (BM_SCALING == _SCALING_UNIFORM_)
  #path BM_SCALING_FILE  "<ANYBODY_PATH_BODY>\Scaling\ScalingUniform.any"
#endif

#if (BM_SCALING == _SCALING_LENGTHMASS_)
  #path BM_SCALING_FILE  "<ANYBODY_PATH_BODY>\Scaling\ScalingLengthMass.any"
#endif

#if (BM_SCALING == _SCALING_LENGTHMASSFAT_)
  #path BM_SCALING_FILE  "<ANYBODY_PATH_BODY>\Scaling\ScalingLengthMassFat.any"
#endif

#if BM_SCALING == _SCALING_XYZ_
  #path BM_SCALING_FILE "<ANYBODY_PATH_BODY>\Scaling\ScalingXYZMassFat.any"
#endif


#ifdef BM_SCALING_ANTHRO_FILE
#if BM_SCALING == _SCALING_STANDARD_ | BM_SCALING == _SCALING_NONE_
   AnyInt BM_Warning1= warn(0, strformat("\n"+
      "------------------------------------------------------------------------------------------------------\n"+
      "    The BM_SCALING setting is does not work with custom anthropometric data.\n"+
      "    E.g. anthropmetry set with '#path BM_SCALING_ANTHRO_FILE'\n"+
      "    BM_SCALING have been redefined to _SCALING_UNIFORM_.\n"+
      "    To dismiss this warning; set BM_SCALING yourself or do not set BM_SCALING_ANTHRO_FILE.\n"+
      "-------------------------------------------------------------------------------------------------------"));
   #undef BM_SCALING
   #define BM_SCALING _SCALING_UNIFORM_
#endif
#endif

//
// Muscle Calibration related logic
//
#if ((BM_CALIBRATION_TYPE == _CALIBRATION_TYPE_2PAR_) | (BM_CALIBRATION_TYPE == _EXPERIMENTAL_CALIBRATION_TYPE_2PAR_)) & BM_TRUNK_CERVICAL_RHYTHM == OFF

  AnyInt bm_cervical_rhythm_notice1= notice(0, strformat("\n"+
      "------------------------------------------------------------------------------------------------------\n"+
      "    Please note that BM_TRUNK_CERVICAL_RHYTHM is set to OFF. \n"+
      "    No default mannequin drivers are used to drive cervicalspine joints.\n"+
      "    _CALIBRATION_TYPE_2PAR_ requires BM_TRUNK_CERVICAL_RHYTHM to be ON.\n"+
      "-------------------------------------------------------------------------------------------------------"));

#endif

//
// Foot model related logic
//
#if (BM_FOOT_MODEL == _FOOT_MODEL_RIGID_GM_) | (BM_FOOT_MODEL == _FOOT_MODEL_TOE_FLEX_GM_) | (BM_FOOT_MODEL == _FOOT_MODEL_DETAILED_GM_)
#if BM_LEG_MODEL == _LEG_MODEL_LEG_

  #ifndef ANYBODY_GM_FOOT_MODEL_SUPPRESS_NOTICES
  AnyInt bm_foot_model_gm_notice1= notice(0, strformat("\n"+
      "------------------------------------------------------------------------------------------------------\n"+
      "    Please note the GM foot model can only be used with the TLEM leg model. \n"+
      "    The foot model is set to the default foot model by the system. \n"+
      "    The notice can be disabled by setting: ANYBODY_GM_FOOT_MODEL_SUPPRESS_NOTICES\n"+
      "-------------------------------------------------------------------------------------------------------"));
  #endif

  #undef BM_FOOT_MODEL
  #define BM_FOOT_MODEL _FOOT_MODEL_DEFAULT_
#endif
#endif

#if (BM_FOOT_MODEL == _FOOT_MODEL_RIGID_GM_) | (BM_FOOT_MODEL == _FOOT_MODEL_TOE_FLEX_GM_) | (BM_FOOT_MODEL == _FOOT_MODEL_DETAILED_GM_)
#ifndef ANYBODY_GM_FOOT_MODEL_SUPPRESS_NOTICES

  #if ((BM_LEG_MUSCLES_LEFT == 0) & (BM_FOOT_MUSCLES_LEFT > 0) & (BM_LEG_LEFT > 0)) | ((BM_LEG_MUSCLES_RIGHT == 0) & (BM_FOOT_MUSCLES_RIGHT > 0) & (BM_LEG_RIGHT > 0))
  AnyInt bm_foot_model_gm_muscle_notice1= notice(0, strformat("\n"+
      "------------------------------------------------------------------------------------------------------\n"+
      "    The foot muscles can only only be included if leg muscles are included. \n"+
      "    The foot muscles are not included as leg muscle are set to OFF.\n"+
      "-------------------------------------------------------------------------------------------------------"));
  #endif

  #if (BM_FOOT_MODEL == _FOOT_MODEL_TOE_FLEX_GM_) | (BM_FOOT_MODEL == _FOOT_MODEL_DETAILED_GM_)
    #if ((BM_LEG_MUSCLES_LEFT > 0) & (BM_FOOT_MUSCLES_LEFT == _MUSCLES_3E_HILL_)) | ((BM_LEG_MUSCLES_RIGHT > 0) & (BM_FOOT_MUSCLES_RIGHT == _MUSCLES_3E_HILL_))
    AnyInt bm_foot_model_gm_muscle_notice2= notice(0, strformat("\n"+
        "------------------------------------------------------------------------------------------------------\n"+
        "    The foot muscles have been set to use the 3E Hill muscle model. Currently,\n"+
        "    there is no calibration routine for Hill muscle models in the foot.\n"+
        "    Moreover, the muscle parameters may not be correct. \n"+
        "    The foot muscles, therefore, will not work correctly. \n"+
        "    You can define your own calibration study for the foot model OR use\n"+
        "    simple muscle model by setting, e.g., BM_FOOT_MUSCLES_LEFT to _MUSCLES_SIMPLE_.\n"+
        "-------------------------------------------------------------------------------------------------------"));
    #endif
  #endif

  #if BM_FOOT_MODEL == _FOOT_MODEL_DETAILED_GM_
  AnyInt bm_foot_model_gm_detailed_notice1= notice(0, strformat("\n"+
      "------------------------------------------------------------------------------------------------------\n"+
      "    The detailed GM foot model has been enabled. This is a highly complex model \n"+
      "    and exists as an experimental model. The model introduces additional \n"+
      "    ligaments and ligament drivers, and requires an overdeterminate solver. \n"+
      "    The model requires ligament calibration to function correctly. \n"+
      "    It is up to the user to come up with the calibration routine for the \n"+
      "    detailed GM foot model. \n"+
      "-------------------------------------------------------------------------------------------------------"));
  #endif

  #endif // SUPPRESS_FOOT_MODEL_GM_NOTICES

#endif
