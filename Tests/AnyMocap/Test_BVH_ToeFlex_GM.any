//ignore_errors = ['FileReader.FileName',"Orientation close to Gimbal Lock"]


#include "../libdef.any"

#path MOCAP_PATH_MAINFILEDIR "../../Application/MocapExamples/SpecialFeatures"
#path MOCAP_PATH_MAINFILE "<MOCAP_PATH_MAINFILEDIR>/BVH_Xsens_ToeFlexion.main.any"


#ifdef TEST_NAME
#define  MOCAP_TEST_FILENAME_PREFIX  TEST_NAME + "_"
#else
#define  MOCAP_TEST_FILENAME_PREFIX  "GUI1_"
#endif


//// Run Analysis with a reduced number of time steps
//// to make test go faster. 
//#define N_STEP_PARAM_OPT 10
//#define N_STEP_KINEMATICS 197
#define N_STEP 20



#include "<MOCAP_PATH_MAINFILE>"

Main = 
{
  AnyOperationSequence  TestRunApplication = 
  {
   // AnyOperation& BVH_StickFigure = Main.Studies.BVH_StickFigure.Kinematics;
    AnyOperation& RunAnalysis = Main.RunAnalysis; 
  };

  
  #ifndef CREATE_IMAGE
    AnyOperation& RunTest = Main.TestRunApplication;
  #else
    Main.ModelSetup.TrialSpecificData.tStart = 3.45;
    #include "../Cameras.any"
    AnyOperationSequence CameraInitPos = {
      AnyOperation& ref0 = Main.Studies.MarkerTracking.InitialConditions; 
//      AnyOperation& ref1 = Main.Studies.InverseDynamicStudy.InitialConditions;
      Template_OperationUpdateValues UpdateValues = {};
    };
    LoadTimeCam.CameraLookAtPoint = Main.HumanModel.BodyModel.Left.Leg.Seg.Foot.Toe1.DistalPhalange1.r+{0.0,0.15,-0.0};
    LoadTimeCam.CameraFieldOfView = DesignVar(0.6);
    LoadTimeCam.CameraDirection  = {1,0.0,-0.7};
  #endif  
  
};