//# Defintions for the python test framwork 
//define = [
//  {'BM_LEG_MODEL':'_LEG_MODEL_TLEM1_'}, 
//  {'BM_LEG_MODEL':'_LEG_MODEL_TLEM2_'}, 
//]
//ignore_errors = ['FileReader.FileName']

#include "../libdef.any"

#path MOCAP_PATH_MAINFILEDIR  "<ANYMOCAP_EXAMPLES>/Plug-in-gait_MultiTrial_StandingRef/Trials/FlywheelSquat_1/"
#path MOCAP_PATH_MAINFILE "<MOCAP_PATH_MAINFILEDIR>/Main.any"
#define MOCAP_NAME_MAINFILEDIR "FlywheelSquat_1"


#ifdef TEST_NAME
  #if BM_LEG_MODEL == _LEG_MODEL_TLEM1_
  #define  MOCAP_TEST_FILENAME_PREFIX  "Test_TLEM1_"
  #endif
  #if BM_LEG_MODEL == _LEG_MODEL_TLEM2_
  #define  MOCAP_TEST_FILENAME_PREFIX  "Test_TLEM2_"
  #endif
#else
 #define  MOCAP_TEST_FILENAME_PREFIX  "GUI_"
 #define BM_LEG_MODEL _LEG_MODEL_TLEM2_
 //#define CREATE_IMAGE
#endif

#ifdef CREATE_IMAGE
#undef MOCAP_TEST_FILENAME_PREFIX
#path TEMP_PATH "<MOCAP_PATH_MAINFILEDIR>/../../Output"
#endif



// Run Analysis with a reduced number of time steps
// to make test go faster. 
#define N_STEP 30


#include "<MOCAP_PATH_MAINFILE>"

Main = 
{
  AnyOperation& TestRunApplication = Main.RunAnalysis;
  
  #ifndef CREATE_IMAGE
    AnyOperation& RunTest = Main.TestRunApplication;
  #else
    #include "../Cameras.any"
    AnyOperationSequence CameraInitPos = 
    {
      AnyOperation& ref1 = Main.RunAnalysis.LoadParameters;
      AnyOperation& ref2 = Main.Studies.InverseDynamicStudy.InitialConditions;
    };
    LoadTimeCam.CameraLookAtPoint = Main.HumanModel.BodyModel.Trunk.SegmentsLumbar.PelvisSeg.r+{0,0,-0.25};
    LoadTimeCam.CameraFieldOfView = DesignVar(1.9);
    LoadTimeCam.CameraDirection  = {0,-1,0.3};
  #endif      
};
