// Set the body dimensions to match the source model from Github.
HumanModel.Anthropometrics.SegmentDimensions = {
  PelvisHeight = DesignVar(0.108*.BodyHeight/1.75); 
  PelvisDepth = DesignVar(0.1399611*.SegmentScaleFactors.BodyScale); 
  
  HeadWidth = DesignVar(0.1800*.SegmentScaleFactors.BodyScale); ///< Distance from the most lateral point to most medial point on the skull
  HeadDepth = DesignVar(0.2299*.SegmentScaleFactors.BodyScale); ///<  Distance from the most anterior point on the skull to the most posterior point on the skull
  
  TrunkWidth = DesignVar(0.3881839*.SegmentScaleFactors.BodyScale); //< Width between shoulder joints
  TrunkDepth = DesignVar(0.1870*.SegmentScaleFactors.BodyScale); ///< Horizontal distance between (midpoint of LTptT8S3Via3NodeL and LTptT8S3Via3NodeR) and (midpoint of RACP_CO6ViaNodeR and RACP_CO6ViaNodeL)
  
  NeckLength = DesignVar(0.1390*.BodyHeight/1.75); ///< Measured as vertical distance between C7 to C1HatNode on thorax segment
  
  Right ={
    FootHeight = DesignVar(0.0502*..BodyHeight/1.75);
    FootWidth = DesignVar(0.0839*1.001849);
  };
};

// Include custom scaling to morph the detailed foot back to the GM foot model.
// The detailed foot model in the AMMR was made by morphing the GM foot model to
// the TLEM foot model. This file introduces a custom scaling routine to morph it
// back to the GM foot
HumanModel.Scaling.GeometricalScaling = {
  Right.Foot = {
    #include "MyScalingFunction.any"
    ScaleFunction.Custom = &MyScalingFunction.Transform;
  };
};


// Create a reference node in each foot model segment to simulate the segmental frame 
// from the GM foot model. This reference node is then used in the MarkerProtocol as 
// the option for PlaceMarkerAt. This ensures that the marker protocol can be used 
// without the need to update sRelOpt and Optimization directions.
HumanModel.BodyModel.Right.Leg.Seg.Foot = {
  AnyFloat GMFootLegacyFrameOrigin = Scale({0.0,0.0,0.0});
  AnyMat33 GMFootLegacyFrameOrientation = RotMat(Scale({0.0,0.0,0.0}), Scale({0.01,0.0,0.0}), Scale({0.0,0.01,0.0}));
  
  Talus                 = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Calcaneus             = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Cuboid                = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Navicular             = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  MedialCuneiform       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  IntermediateCuneiform = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  LateralCuneiform      = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Metatarsal1           = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Metatarsal2           = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Metatarsal3           = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Metatarsal4           = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  Metatarsal5           = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  ProximalPhalange1     = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  ProximalPhalange2     = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  ProximalPhalange3     = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  ProximalPhalange4     = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  ProximalPhalange5     = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  MiddlePhalange2       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  MiddlePhalange3       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  MiddlePhalange4       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  MiddlePhalange5       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  DistalPhalange1       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  DistalPhalange2       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  DistalPhalange3       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  DistalPhalange4       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
  DistalPhalange5       = {AnyRefNode GMFootLegacySegmentalFrame = {sRel = ..GMFootLegacyFrameOrigin; ARel = ..GMFootLegacyFrameOrientation;};};
};