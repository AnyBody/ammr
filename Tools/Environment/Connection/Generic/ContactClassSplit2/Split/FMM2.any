#class_template FMM2 (
__CLASS__=AnyForceMomentMeasure2,
BASE_FRAME,
BASE_SEG,
FORCE_FOLDER
) {
  
  AnyRefFrame& BaseFrame = BASE_FRAME ;
  AnySeg &BaseSeg = BASE_SEG;

  
  AnyVar Fx_On_Base = FLocal[0];
  AnyVar Fy_On_Base = FLocal[1];
  AnyVar Fz_On_Base = FLocal[2];
  AnyVar Mx_On_Base = MLocal[0];
  AnyVar My_On_Base = MLocal[1];
  AnyVar Mz_On_Base = MLocal[2];  
  
  AnyVar Fx_On_Target = -Fx_On_Base; 
  AnyVar Fy_On_Target = -Fy_On_Base; 
  AnyVar Fz_On_Target = -Fz_On_Base;
  AnyVar Mx_On_Target = -Mx_On_Base; 
  AnyVar My_On_Target = -My_On_Base; 
  AnyVar Mz_On_Target = -Mz_On_Base;         
  
  AnyVar Fx = Fx_On_Target;
  AnyVar Fy = Fy_On_Target;
  AnyVar Fz = Fz_On_Target;
  AnyVar Mx = Mx_On_Target;
  AnyVar My = My_On_Target;
  AnyVar Mz = Mz_On_Target;
  
  AnyFloat FGlobal = {Fx,Fy,Fz}*BaseFrame.Axes';
  AnyFloat FMagnitude = vnorm({Fx,Fy,Fz});
  AnyIntVar OnOff = iffun(gtfun(FMagnitude,10.0),1,0);
  
  
  //     AnyFolder &ref = FORCE_FOLDER;
  //     AnyObjectPtr refptr = &FORCE_FOLDER;
  //AnyStringVar objstr = CompleteNameOf(&FORCE_FOLDER);
  
  //     AnyFolder &ref = FORCE_FOLDER;
  
  AnyVec3 FLocal = F * BaseFrame.Axes;
  AnyVec3 MLocal = M * BaseFrame.Axes;
  //     IncludeForces = ObjSearchRecursive("...ContactDetection.ContDet","*","AnyGeneralMuscle");     
  IncludeForces = ObjSearchRecursive(CompleteNameOf(&FORCE_FOLDER),"*","AnyGeneralMuscle");     
  

};
