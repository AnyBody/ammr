#ifndef MOCAP_EXCLUDE_DEFAULT_JOINT_LIMITS

ModelSetup.MocapExtraDrivers = {

  /// This section adds kinematic joint limits for unrealistic joint angles.
  /// E.g. prevent the elbow from bending backwards etc.
  /// This makes the Kinematic solver more robust by restricting marker tracking
  /// solutions from non-physiologically positures
  AnyFolder DefaultJointLimits =
  {
  #if BM_ARM_RIGHT
    KinLimitsDriver H1_LimitElbowPronationRight(
       KinMeasure = ....Human1.HumanModel.BodyModel.Interface.Right.ElbowPronation
    ) = {
      AnyFloat ROM ??= {-100, 100};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H1_LimitElbowFlexionRight(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Right.ElbowFlexion
    ) =  {
      AnyFloat ROM ??= {-10, 180};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H1_WristAbductionRight(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Right.WristAbduction
    ) =  {
      AnyFloat ROM ??= {-90, 90};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H1_WristFlexionRight(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Right.WristFlexion
    ) =  {
      AnyFloat ROM ??= {-120, 120};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };
  #endif

  #if BM_ARM_LEFT
    KinLimitsDriver H1_LimitElbowPronationLeft(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Left.ElbowPronation
    ) = {
      AnyFloat ROM ??= {-100, 100};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H1_LimitElbowFlexionLeft(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Left.ElbowFlexion
    ) =  {
      AnyFloat ROM ??= {-10, 180};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H1_WristAbductionLeft(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Left.WristAbduction
    ) =  {
      AnyFloat ROM ??= {-90, 90};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H1_WristFlexionLeft(
      KinMeasure= ....Human1.HumanModel.BodyModel.Interface.Left.WristFlexion
    ) =  {
      AnyFloat ROM ??= {-120, 120};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };
  #endif
  
  
  
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////
  #if BM_ARM_RIGHT
    KinLimitsDriver H2_LimitElbowPronationRight(
       KinMeasure = ....Human2.HumanModel.BodyModel.Interface.Right.ElbowPronation
    ) = {
      AnyFloat ROM ??= {-100, 100};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H2_LimitElbowFlexionRight(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Right.ElbowFlexion
    ) =  {
      AnyFloat ROM ??= {-10, 180};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H2_WristAbductionRight(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Right.WristAbduction
    ) =  {
      AnyFloat ROM ??= {-90, 90};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H2_WristFlexionRight(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Right.WristFlexion
    ) =  {
      AnyFloat ROM ??= {-120, 120};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };
  #endif

  #if BM_ARM_LEFT
    KinLimitsDriver H2_LimitElbowPronationLeft(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Left.ElbowPronation
    ) = {
      AnyFloat ROM ??= {-100, 100};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H2_LimitElbowFlexionLeft(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Left.ElbowFlexion
    ) =  {
      AnyFloat ROM ??= {-10, 180};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H2_WristAbductionLeft(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Left.WristAbduction
    ) =  {
      AnyFloat ROM ??= {-90, 90};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };

    KinLimitsDriver H2_WristFlexionLeft(
      KinMeasure= ....Human2.HumanModel.BodyModel.Interface.Left.WristFlexion
    ) =  {
      AnyFloat ROM ??= {-120, 120};
      LowerLimit = ROM[0];
      HighLimit = ROM[1];
      MeasureConversion=180/pi;
    };
  #endif
  
  };
};

#endif
